(self.webpackChunkbabylonjs_typescript_webpack_simple_scene=self.webpackChunkbabylonjs_typescript_webpack_simple_scene||[]).push([[59],{4059:(e,t,i)=>{"use strict";i.r(t),i.d(t,{SkyBox:()=>n});var s=i(1465),o=i(5454);i(6699);const r=i.p+"0c03bd6e3c9d04da0cf428bbf487bf68.hdr";var n=function(){function e(e,t){var i=this;this._procedural=e,this._scene=t,this._oldSunPosition=new s.Pa4,this._skyMaterial=null,this._probe=null,this._skybox=s.VO7.CreateBox("skyBox",{size:1e3,sideOrientation:s.Kj0.BACKSIDE},this._scene),t.onBeforeRenderObservable.add((function(){var e,s;i._skybox.position=null!==(s=null===(e=t.activeCameras)||void 0===e?void 0:e[0].position)&&void 0!==s?s:t.activeCamera.position})),e?this._initProceduralSkybox():this._initSkybox()}return Object.defineProperty(e.prototype,"probe",{get:function(){return this._probe},enumerable:!1,configurable:!0}),e.prototype.update=function(e){this._procedural&&(this._oldSunPosition.equals(this._skyMaterial.sunPosition)||(this._probe.cubeTexture.refreshRate=0,this._oldSunPosition.copyFrom(this._skyMaterial.sunPosition)),e.position=this._skyMaterial.sunPosition,e.direction=this._skyMaterial.sunPosition.negate().normalize(),e.diffuse=this._skyMaterial.getSunColor())},e.prototype._initProceduralSkybox=function(){var e=this;this._skyMaterial=new o.fE("sky",this._scene),this._skybox.material=this._skyMaterial,this._skybox.material.disableDepthWrite=!0,this._skyMaterial.azimuth=.307,this._skyMaterial.inclination=0,window.ss=this._skyMaterial,this._probe=new s.xNJ("skyProbe",128,this._scene,!0,!0,!0),this._probe.cubeTexture.gammaSpace=!0,this._probe.renderList.push(this._skybox),this._probe.cubeTexture.refreshRate=0,this._probe.cubeTexture.onAfterUnbindObservable.add((function(){var t;(t=e._probe.cubeTexture.getInternalTexture())._sphericalPolynomial=null,t._sphericalPolynomialPromise=null,t._sphericalPolynomialComputed=!1})),this._scene.environmentTexture=this._probe.cubeTexture,this._scene.customRenderTargets.push(this._probe.cubeTexture)},e.prototype._initSkybox=function(){var e=new s.ev7(r,this._scene,512,!1,!0,!1,!0),t=new s.KuD("skyBox",this._scene);t.backFaceCulling=!1,t.reflectionTexture=e,t.reflectionTexture.coordinatesMode=s.xEZ.SKYBOX_MODE,t.diffuseColor=new s.Wot(0,0,0),t.specularColor=new s.Wot(0,0,0),this._skybox.material=t},e}()}}]);
//# sourceMappingURL=59.babylonBundle.js.map